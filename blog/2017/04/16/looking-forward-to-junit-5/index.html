<!doctype html><html lang=en><head><title>Looking forward to JUnit 5 :: Nick Ebbitt</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In this post I explore some of the features I&amp;rsquo;m looking forward to in the upcoming JUnit 5 release.
First, a bit of background&amp;hellip;
The process to create a new version of JUnit kicked off around the middle of 2015 when a crowdfunding campaign was started. At this point the initiative was referred to as JUnit Lambda. One of the drivers for this was the release of Java 8 that provided a number of language features, such as Streams and Lambdas, offering new ways for the test framework to be implemented and tests to be written."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://www.nickebbitt.com/blog/2017/04/16/looking-forward-to-junit-5/><link rel=stylesheet href=https://www.nickebbitt.com/styles.css><link rel="shortcut icon" href=https://www.nickebbitt.com/img/theme-colors/green.png><link rel=apple-touch-icon href=https://www.nickebbitt.com/img/theme-colors/green.png><meta name=twitter:card content="summary"><meta name=twitter:site content="nickebbitt"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Looking forward to JUnit 5"><meta property="og:description" content="In this post I explore some of the features I&amp;rsquo;m looking forward to in the upcoming JUnit 5 release.
First, a bit of background&amp;hellip;
The process to create a new version of JUnit kicked off around the middle of 2015 when a crowdfunding campaign was started. At this point the initiative was referred to as JUnit Lambda. One of the drivers for this was the release of Java 8 that provided a number of language features, such as Streams and Lambdas, offering new ways for the test framework to be implemented and tests to be written."><meta property="og:url" content="https://www.nickebbitt.com/blog/2017/04/16/looking-forward-to-junit-5/"><meta property="og:site_name" content="Nick Ebbitt"><meta property="og:image" content="https://www.nickebbitt.com/img/favicon/green.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2017-04-16 00:00:00 +0000 UTC"></head><body class=green><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/posts><div class=logo>Nick Ebbitt</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/about>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/posts>Posts</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/posts>Posts</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://www.nickebbitt.com/blog/2017/04/16/looking-forward-to-junit-5/>Looking forward to JUnit 5</a></h1><div class=post-meta><time class=post-date>2017-04-16 ::
</time><span class=post-reading-time>:: 5 min read (1018 words)</span></div><div class=post-content><div><p>In this post I explore some of the features I&rsquo;m looking forward to in the upcoming JUnit 5 release.</p><p>First, a bit of background&mldr;</p><p>The process to create a new version of JUnit kicked off around the middle of 2015 when a <a href=https://github.com/junit-team/junit5/wiki/Crowdfunding-Campaign>crowdfunding campaign</a> was started. At this point the initiative was referred to as <strong>JUnit Lambda</strong>. One of the drivers for this was the release of Java 8 that provided a number of language features, such as Streams and Lambdas, offering new ways for the test framework to be implemented and tests to be written. The project was later renamed JUnit 5 and the <a href=https://github.com/junit-team/junit5/wiki/Roadmap>roadmap</a> for the project leading up to the present day can be found on their GitHub page.</p><p>JUnit 5 is not yet complete however the GA release is currently on schedule to be available during Q3 2017. The latest milestone, <a href=http://junit.org/junit5/docs/current/user-guide/#release-notes-5.0.0-m4>5.0.0 M4</a>, was released on 1st April 2017.</p><p>Anyway, here are my thoughts on some of the new features that will be available later this year&mldr;</p><h2 id=display-names>Display Names<a href=#display-names class=hanchor arialabel=Anchor>&#8983;</a></h2><p>How often do you write a test case for which the name is quite long due to you wanting to clearly describe the intentions of the test. Depending on your coding style, you may use camel case that can <code>resultInReallyLongAndDifficultToReadTestNames</code>.</p><p>The new <a href=http://junit.org/junit5/docs/current/user-guide/#writing-tests-display-names><code>@DisplayName</code></a> annotation provides a solution to this. While functionally this change isn&rsquo;t really offering anything too exciting, I think the clarity it adds to your tests, particularly when viewing them in the test results panel of your IDE, is really valuable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;The display name annotation provides a...&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DisplayNames</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;way of producing more readable test names&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>test1</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>ratherThanSomethingHarderToReadLikeThis</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The improvement of the new style test names over the old is evident when viewing test results in the IDE.</p><p><img alt="Display Names IDE Integration" src=/blog/2017/04/16/looking-forward-to-junit-5/display-names-ide.png></p><h2 id=nested-tests>Nested Tests<a href=#nested-tests class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The <a href=http://junit.org/junit5/docs/current/user-guide/#writing-tests-nested><code>@Nested</code></a> annotation provides us with a new way of organising tests. When applying the annotation to a non-static inner class we are now able to create one or more logical groups of test cases within a single outer test class. The nesting can be applied to an arbitrary depth providing great flexibility.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;High-level User Story&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NestedTests</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Nested</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;Simple Scenario&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FeatureOne</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;Test One&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testOne</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;Test Two&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testTwo</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Nested</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;More Complex Scenario&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FeatureTwo</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;Test One&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testOne</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Nested</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;Nested Scenario&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SubFeature</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@DisplayName</span>(<span style=color:#e6db74>&#34;Test One&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testOne</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This works great with IDE integration too to further improve test organisation and the readability of the results&mldr;</p><p><img alt="Nested Tests IDE Integration" src=/blog/2017/04/16/looking-forward-to-junit-5/nested-tests-ide.png></p><h2 id=tagging--filtering>Tagging & Filtering<a href=#tagging--filtering class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The <code>@Tag</code> annotation provides us with a nice way of categorising tests. An obvious use-case would be to categorise tests based on the style of test e.g. integration, system, end-to-end, etc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TaggedTests</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Tag</span>(<span style=color:#e6db74>&#34;integration&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>integrationTest</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Tag</span>(<span style=color:#e6db74>&#34;system&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>systemTest</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Tag</span>(<span style=color:#e6db74>&#34;end-to-end&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>endToEndTest</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, for example, the different types of tests could be run as required at the relevant stages of a delivery pipeline.</p><h2 id=grouped-assertions>Grouped assertions<a href=#grouped-assertions class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The ability to now group assertions looks a really useful new feature. In JUnit 4, if a test had multiple assertions then execution would halt after the first failure.</p><pre tabindex=0><code>@Test
void ungroupedAssertions() {

    assertTrue(false, &#34;this test fails here&#34;);
    assertTrue(true, &#34;so we never perform this assertion&#34;);

}
</code></pre><p>Whereas in JUnit 5, every assertion will be performed and the results provided for each of them.</p><pre tabindex=0><code>@Test
void groupedAssertions() {

    assertAll(
       &#34;all of these assertions&#34;,
            () -&gt; assertTrue(true, &#34;are performed&#34;),
            () -&gt; assertTrue(false, &#34;even if the&#34;),
            () -&gt; assertTrue(false, &#34;previous one failed&#34;)
    );

}
</code></pre><p>When viewing the test failure for a grouped assertion in the IDE (IntelliJ) we see that the test failed and closer inspection of the output / stack trace shows the detail related to which assertions failed.</p><p><img alt="Grouped assertions IDE" src=/blog/2017/04/16/looking-forward-to-junit-5/grouped-assertions-ide.png></p><p>It would be nice to see the IDE integration enhanced further to present the individual assertion failures more clearly in a similar way to the overall test case failures. I had to scroll a bit to find the summary of the assertions that failed.</p><h2 id=parameterised-tests>Parameterised Tests<a href=#parameterised-tests class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Now parameterised tests aren&rsquo;t a new thing - we could write them in JUnit 4 with the help of the <a href=https://github.com/junit-team/junit4/wiki/parameterized-tests><code>Parameterized.class</code></a> test runner. Providing the parameters was ugly though&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Parameters</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Collection<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>[]&gt;</span> <span style=color:#a6e22e>data</span>() {
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[][]</span> {
</span></span><span style=display:flex><span> { 0, 0 }, { 1, 1 }, { 2, 1 }, { 3, 2 }, { 4, 3 }, { 5, 5 }
</span></span><span style=display:flex><span> });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This feature has been revisited and a completely new way of writing parameterised tests has been provided. With the use of the <code>@ParameterizedTest</code> and <code>@ValueSource</code> annotations we have a simple but very powerful way of providing parameters to a test method.</p><p>Values can be provided in-line similarly to the example above but with much simplified syntax.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ValueSource</span>(ints <span style=color:#f92672>=</span> {1, 2, 3})
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testWithParams</span>(<span style=color:#66d9ef>int</span> param) {
</span></span><span style=display:flex><span>assertTrue(param <span style=color:#f92672>&lt;</span> 3);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As can be seen in the following screen shot, three tests are executed of which one fails.</p><p><img alt="Parameterised Tests IDE" src=/blog/2017/04/16/looking-forward-to-junit-5/parameterised-tests-ide.png></p><p>As well as <code>@ValueSource</code>, other options for providing test inputs as parameters are:</p><ul><li><code>@EnumSource</code> - a set of Enum constants.</li><li><code>@MethodSource</code> - the result of a method in the form of a <code>Stream</code>, <code>Iterable</code>, <code>Iterator</code> or an array of arguments.</li><li><code>@CsvSource</code> - a list of comma separated values.</li><li><code>@CsvFileSource</code> - a CSV file from the classpath.</li></ul><p>The <code>@CsvFileSource</code> stands out as a really convenient way of driving large volumes of test data through a test case.</p><h2 id=final-thoughts>Final thoughts<a href=#final-thoughts class=hanchor arialabel=Anchor>&#8983;</a></h2><p>This post only scratches the surface of what&rsquo;s coming in JUnit 5.</p><p>One key area I&rsquo;ve not covered at all that looks intriguing is the ability to write <a href=http://junit.org/junit5/docs/current/user-guide/#writing-tests-dynamic-tests>dynamic tests</a>. I&rsquo;m looking forward to seeing how this is used in practice.</p><p>The new <a href=http://junit.org/junit5/docs/current/user-guide/#extensions>extension model</a> also looks like it will provide a simple and flexible new way for JUnit to be extended, improving on the previous options of <code>Runner</code>, <code>@Rule</code> and <code>@ClassRule</code>.</p><p>I&rsquo;m looking forward to the making use of all of the great new features when JUnit 5 is released.</p><hr><p>All code from this post is available on <a href=https://github.com/nickebbitt/junit5-examples>GitHub</a>.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://www.nickebbitt.com/blog/2017/06/26/continuous-unit-testing-with-java-infinitest/><span class=button__icon>←</span>
<span class=button__text>Continuous unit testing with Java & Infinitest</span>
</a></span><span class="button next"><a href=https://www.nickebbitt.com/blog/2017/03/22/asynchronous-web-service-using-completable-future/><span class=button__text>Asynchronous web service using Completable Future</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2024 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>